schema: '2.0'
stages:
  positional_encoding:
    cmd: python src/features/positional_encoding.py
    deps:
    - path: src/features/tokenizer_transformer.py
      md5: 1b147d9540ebdfa049699e665bbad4b6
      size: 3118
    params:
      params.yaml:
        positional_encoding.d_model: 400
        positional_encoding.input_vocab_size: 7765
        positional_encoding.target_vocab_size: 7010
  load:
    cmd: python src/data/load_dataset.py data/
    params:
      params.yaml:
        load.model_name: ted_hrlr_translate/pt_to_en
  train_transformer:
    cmd: python src/models/train_transformer.py
    deps:
    - path: src/features/positional_encoding.py
      md5: 0a36209ff76713dc246efd56bac7b8ae
      size: 2417
    params:
      params.yaml:
        train_transformer.EPOCHS: 1
        train_transformer.d_model: 128
        train_transformer.dff: 512
        train_transformer.dropout_rate: 0.2
        train_transformer.num_attention_heads_decoder: 4
        train_transformer.num_attention_heads_encoder: 4
        train_transformer.num_layers_decoder: 4
        train_transformer.num_layers_encoder: 4
    outs:
    - path: dvclive/metrics.json
      md5: a7681169ad4d73063d8169994bdc945f
      size: 98
    - path: dvclive/plots
      md5: 42e028319d858c0b07fe8d565789564f.dir
      size: 8522
      nfiles: 2
  tokenizer_transformer:
    cmd: python src/features/tokenizer_transformer.py
    deps:
    - path: src/data/load_dataset.py
      md5: 7dae8d818d7e993dd9160663e4b3424e
      size: 1490
    params:
      params.yaml:
        tokenizer_transformer.BATCH_SIZE: 32
        tokenizer_transformer.BUFFER_SIZE: 20000
        tokenizer_transformer.MAX_TOKENS: 128
        tokenizer_transformer.model_name_zip: ted_hrlr_translate_pt_en_converter.zip
