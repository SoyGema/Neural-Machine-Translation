schema: '2.0'
stages:
  positional_encoding:
    cmd: python src/features/positional_encoding.py
    deps:
    - path: src/features/tokenizer_transformer.py
      md5: 1b147d9540ebdfa049699e665bbad4b6
      size: 3118
    params:
      params.yaml:
        positional_encoding.d_model: 400
        positional_encoding.input_vocab_size: 7765
        positional_encoding.target_vocab_size: 7010
  load:
    cmd: python src/data/load_dataset.py data/
    params:
      params.yaml:
        load.model_name: ted_hrlr_translate/pt_to_en
  train_transformer:
    cmd: python src/models/train_transformer.py
    deps:
    - path: src/features/positional_encoding.py
      md5: 295990473236f88ceec9cdaa5ffd70b9
      size: 2522
    params:
      params.yaml:
        train_transformer.EPOCHS: 2
        train_transformer.d_model: 128
        train_transformer.dff: 512
        train_transformer.dropout_rate: 0.1
        train_transformer.num_attention_heads_decoder: 8
        train_transformer.num_attention_heads_encoder: 6
        train_transformer.num_layers_decoder: 6
        train_transformer.num_layers_encoder: 4
    outs:
    - path: dvclive/metrics.json
      md5: a57e6c999c9e6d5c8a84cea5c1a0d58f
      size: 99
    - path: dvclive/plots
      md5: f26544e6448bd41419090cff6a5ab044.dir
      size: 36135
      nfiles: 2
  tokenizer_transformer:
    cmd: python src/features/tokenizer_transformer.py
    deps:
    - path: src/data/load_dataset.py
      md5: 7dae8d818d7e993dd9160663e4b3424e
      size: 1490
    params:
      params.yaml:
        tokenizer_transformer.BATCH_SIZE: 64
        tokenizer_transformer.BUFFER_SIZE: 20000
        tokenizer_transformer.MAX_TOKENS: 128
        tokenizer_transformer.model_name_zip: ted_hrlr_translate_pt_en_converter.zip
